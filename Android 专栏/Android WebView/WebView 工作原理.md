# WebView 工作原理



## 浏览器元素渲染

摘自：https://mp.weixin.qq.com/s/uzVjPQb-VgpR4Eu7dt4FKw

浏览器是如何进行元素渲染的，浏览器的渲染流程有以下四步：

![图片](images/640.jpeg)

a. 计算元素的样式（可能通过脚本重新计算）；

b. 生成每个元素的几何形状和位置（布局）；

c. 绘制图层的每个像素（初始化绘图并且进行绘图）；

d. 将图层绘制到屏幕上（合并渲染层）。



关于最后一步合并渲染层（可以类比 Photoshop 的图层），浏览器会在特定的场合创建独立的渲染层，每个渲染层由 GPU 独立绘制，互不影响，最后浏览器再把各个渲染层合并。这是一种代价较低的操作。



理论上说，FPS 越高，动画会越流畅，目前大多数设备的屏幕刷新率为 60 次/秒，所以通常来讲 FPS 为 60frame/s 时动画效果最好，也就是每帧的消耗时间（帧预算）为 16.67ms。